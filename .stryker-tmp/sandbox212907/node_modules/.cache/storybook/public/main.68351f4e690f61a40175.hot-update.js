"use strict";
globalThis["webpackHotUpdateotus_react_ts_course"]("main",{

/***/ "./src/components/game-of-life/game-of-life.tsx":
/*!******************************************************!*\
  !*** ./src/components/game-of-life/game-of-life.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _grid_grid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../grid/grid */ "./src/components/grid/grid.tsx");
/* harmony import */ var _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game-of-life.utils */ "./src/components/game-of-life/game-of-life.utils.ts");
/* harmony import */ var _game_of_life_module_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game-of-life.module.css */ "./src/components/game-of-life/game-of-life.module.css");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash */ "./node_modules/lodash/lodash.js");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);







var GameOfLife = function () {
  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GRID_AXIS_VALUES_INFO[_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Small].x),
    _useState2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__["default"])(_useState, 2),
    x = _useState2[0],
    setX = _useState2[1];
  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GRID_AXIS_VALUES_INFO[_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Small].y),
    _useState4 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__["default"])(_useState3, 2),
    y = _useState4[0],
    setY = _useState4[1];
  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),
    _useState6 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__["default"])(_useState5, 2),
    grid = _useState6[0],
    setGrid = _useState6[1];
  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),
    _useState8 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__["default"])(_useState7, 2),
    startLife = _useState8[0],
    setStartLife = _useState8[1];
  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),
    _useState10 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__["default"])(_useState9, 2),
    generation = _useState10[0],
    setGeneration = _useState10[1];
  var _useState11 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(100),
    _useState12 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__["default"])(_useState11, 2),
    speed = _useState12[0],
    setSpeed = _useState12[1];
  var intervalRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {
    var newGrid = (0,_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.getEmptyGrid)(x, y);
    setGrid(newGrid);
  }, [x, y]);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {
    if (startLife) {
      intervalRef.current = window.setInterval(logicOfLife, speed);
    }
    return function () {
      return clearInterval(intervalRef.current);
    };
  }, [grid, speed, startLife]);
  var selectSquare = function (row, column) {
    var newGrid = (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__["default"])(grid);
    newGrid[row][column] = !grid[row][column];
    setGrid(newGrid);
  };
  var handleChangeGrid = function (e) {
    var name = e.currentTarget.name;
    if (name === _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Small) {
      setX(_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GRID_AXIS_VALUES_INFO[name].x);
      setY(_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GRID_AXIS_VALUES_INFO[name].y);
    } else if (name === _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Medium) {
      setX(_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GRID_AXIS_VALUES_INFO[name].x);
      setY(_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GRID_AXIS_VALUES_INFO[name].y);
    } else if (name === _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Large) {
      setX(_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GRID_AXIS_VALUES_INFO[name].x);
      setY(_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GRID_AXIS_VALUES_INFO[name].y);
    } else if (name === _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.ConwaysPistol) {
      var newGrid = (0,_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.getConwaysPistol)(grid);
      setGrid(newGrid);
    }
  };
  var logicOfLife = function () {
    var gridClone = grid;
    var newGrid = (0,lodash__WEBPACK_IMPORTED_MODULE_4__.cloneDeep)(grid);
    for (var i = 0; i < x; i++) {
      for (var j = 0; j < y; j++) {
        var count = 0;
        if (i > 0) if (gridClone[i - 1][j]) count++;
        if (i > 0 && j > 0) if (gridClone[i - 1][j - 1]) count++;
        if (i > 0 && j < y - 1) if (gridClone[i - 1][j + 1]) count++;
        if (j < y - 1) if (gridClone[i][j + 1]) count++;
        if (j > 0) if (gridClone[i][j - 1]) count++;
        if (i < x - 1) if (gridClone[i + 1][j]) count++;
        if (i < x - 1 && j > 0) if (gridClone[i + 1][j - 1]) count++;
        if (i < x - 1 && y - 1) if (gridClone[i + 1][j + 1]) count++;
        if (gridClone[i][j] && (count < 2 || count > 3)) newGrid[i][j] = false;
        if (!gridClone[i][j] && count === 3) newGrid[i][j] = true;
      }
    }
    setGrid(newGrid);
    setGeneration(function (prev) {
      return prev + 1;
    });
  };
  var handleStart = function () {
    setStartLife(true);
    clearInterval(intervalRef.current);
    intervalRef.current = window.setInterval(logicOfLife, speed);
  };
  var handleStop = function () {
    setStartLife(false);
    clearInterval(intervalRef.current);
  };
  var handleClearGrid = function () {
    var newGrid = (0,_game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.getEmptyGrid)(x, y);
    setStartLife(false);
    setGeneration(0);
    setGrid(newGrid);
    clearInterval(intervalRef.current);
  };
  var handleRandomGridSquares = function () {
    var newGrid = grid.map(function (rowArr) {
      return rowArr.map(function () {
        return Math.floor(Math.random() * 4) === 1;
      });
    });
    setGrid(newGrid);
  };
  var handleChangeSpeed = function (e) {
    var newSpeed = parseInt(e.currentTarget.value);
    if (newSpeed <= 0) return;
    setSpeed(newSpeed);
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h1", {
    "data-testid": "game_of_life_title"
  }, "\u0418\u0433\u0440\u0430 \u0432 \u0436\u0438\u0437\u043D\u044C"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
    className: _game_of_life_module_css__WEBPACK_IMPORTED_MODULE_3__["default"].buttonGroup
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
    onClick: handleStart
  }, "\u0421\u0442\u0430\u0440\u0442"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
    onClick: handleStop
  }, "\u0421\u0442\u043E\u043F"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
    onClick: handleRandomGridSquares
  }, "\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u043F\u043E\u043B\u0435"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
    onClick: handleClearGrid
  }, "\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("input", {
    type: "number",
    value: speed,
    onChange: handleChangeSpeed
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h3", null, "Generations: ", generation), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_grid_grid__WEBPACK_IMPORTED_MODULE_1__["default"], {
    grid: grid,
    y: y,
    selectSquare: selectSquare
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h3", null, "\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u043B\u0435:"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
    className: _game_of_life_module_css__WEBPACK_IMPORTED_MODULE_3__["default"].buttonGroup
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
    name: _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Small,
    onClick: handleChangeGrid,
    "data-testid": _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Small
  }, "30\u044550"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
    name: _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Medium,
    onClick: handleChangeGrid,
    "data-testid": _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Medium
  }, "50\u044570"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
    name: _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Large,
    onClick: handleChangeGrid,
    "data-testid": _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.Large
  }, "90\u044570"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", {
    name: _game_of_life_utils__WEBPACK_IMPORTED_MODULE_2__.GridAxisValues.ConwaysPistol,
    onClick: handleChangeGrid
  }, "Conway's Pistol grid")));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GameOfLife);

/***/ })

});
//# sourceMappingURL=main.68351f4e690f61a40175.hot-update.js.map